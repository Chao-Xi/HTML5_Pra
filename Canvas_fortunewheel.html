<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Fortunewheel</title>
<style type="text/css">
 #canvas{
	 background-color:#eee;
	 }
</style>
  <script type="text/javascript">
    window.onload=function()
	{
	  var canvas=document.getElementById('canvas');
	  var cobj=canvas.getContext("2d");
	  var btn1=document.getElementById('btn1');
	  var num=Math.PI/180;
	  cobj.translate(250,250);
	  var colorArr=["#4ba7fb","#6dc461","#ee05b9","#b31e04","#d9a95e","#1e3984","#3f37da","#9627fa"];
	  var textArr=['PHP','JavaScript','HTML5','Linux','Jquery','Zend','CakePHP','Laravel'];
	  var angle=0;
	  
	  
	  btn1.onclick=function(){
		location.reload();  
	  }
		  
		  
	  var step=10+10*Math.random();
	  var t=setInterval(function(){
	  console.log(step);
	  if(step<=0.3){
		  clearInterval(t);
		  var num1=Math.ceil(angle/45);
		  var con=textArr[textArr.length-num1];
		  cobj.font="20px Helvetica";
		  cobj.textAlign="center";
		  cobj.fillText(con,0,0);
		  }else{
	     if(angle>=360)
		 {
			angle=0;
		 }
	    
	  step*=0.95
	  angle+=step;
	  cobj.clearRect(-200,-200,500,500);
	  cobj.beginPath();
	  cobj.lineWidth=5;
	  cobj.moveTo(155,0);
	  cobj.lineTo(185,0);
	  cobj.stroke();
	  cobj.lineWidth=2;
	  cobj.save();
	  cobj.rotate(angle*num);	  
		  
	  for(var i=0;i<=8;i++)
	  {
		cobj.beginPath();
		cobj.moveTo(0,0);
		cobj.fillStyle=colorArr[i-1];
		cobj.arc(0,0,150,(i-1)*45*num,i*45*num);
		cobj.closePath();
		cobj.stroke();
		cobj.fill();
	  }
		//white circle
		cobj.beginPath();
		cobj.fillStyle="#fff";
		cobj.arc(0,0,60,0,2*Math.PI);
		cobj.fill();
		
		//fill words
		  for(var i=0;i<8;i++)
		 {
		   cobj.save();
		   cobj.beginPath();
		   cobj.rotate((i*45+27)*num);
		   cobj.fillStyle="#222";
		   cobj.font="15px Helvetica"
		   cobj.fillText(textArr[i],75,0);
		   cobj.restore();
         }
		 
		 cobj.restore();
	
		  }
	  },60);
	  
	  }
	  

  
  </script>
</head>

<body>
  <canvas id="canvas" width=500 height=500></canvas>
  <br/>
  <input type="button" id="btn1" value="start"/>
</body>
</html>
